---
# IBM Cloud Foundry Deployment Manifest
# Alternative deployment option to Code Engine

applications:
- name: traffic-advisor
  memory: 1G
  instances: 1
  buildpacks:
    - python_buildpack
  command: streamlit run traffic_app_optimized.py --server.port=$PORT --server.address=0.0.0.0 --server.headless=true --browser.gatherUsageStats=false
  env:
    STREAMLIT_SERVER_HEADLESS: true
    STREAMLIT_BROWSER_GATHER_USAGE_STATS: false
    STREAMLIT_SERVER_ENABLE_CORS: false
  health-check-type: http
  health-check-http-endpoint: /_stcore/health
  timeout: 180
  disk_quota: 512M
  stack: cflinuxfs4
