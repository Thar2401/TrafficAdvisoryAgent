# Main entry point for Traffic Advisory Agent\n\nimport sys\nimport os\nfrom datetime import datetime\n\n# Add the project root to Python path\nsys.path.append(os.path.dirname(os.path.abspath(__file__)))\n\nfrom src.traffic_agent import TrafficAdvisoryAgent\n\ndef main():\n    \"\"\"\n    Main entry point - demonstrates basic usage of the Traffic Advisory Agent\n    \"\"\"\n    print(\"\")\n    print(\"=\" * 80)\n    print(\"ðŸš¦ AI-BASED TRAFFIC ADVISORY AGENT\")\n    print(\"ðŸŽ¯ SDG 11: Sustainable Cities and Communities\")\n    print(\"=\" * 80)\n    print(\"\")\n    \n    # Initialize the agent\n    print(\"ðŸ”§ Initializing Traffic Advisory Agent...\")\n    agent = TrafficAdvisoryAgent()\n    \n    if not agent.is_initialized:\n        print(\"âŒ Failed to initialize agent.\")\n        return\n    \n    # Display agent status\n    print(\"\\nðŸ“Š Agent Status:\")\n    status = agent.get_agent_status()\n    print(f\"   â€¢ Data Records: {status['data_summary']['total_records']}\")\n    print(f\"   â€¢ Unique Routes: {status['data_summary']['unique_routes']}\")\n    print(f\"   â€¢ Model Trained: {status['model_trained']}\")\n    print(f\"   â€¢ Available Locations: {len(status['available_locations'])}\")\n    \n    print(\"\\n\" + \"=\" * 80)\n    print(\"ðŸ“ INTERACTIVE DEMO\")\n    print(\"=\" * 80)\n    \n    try:\n        while True:\n            print(\"\\nðŸ—ºï¸ Route Planning:\")\n            print(\"Available locations:\", \", \".join(agent.perception.get_available_locations()[:5]), \"...\")\n            \n            # Get user input\n            source = input(\"\\nðŸ“ Enter source location (or 'quit' to exit): \").strip()\n            if source.lower() in ['quit', 'exit', 'q']:\n                break\n                \n            destination = input(\"ðŸŽ¯ Enter destination location: \").strip()\n            if destination.lower() in ['quit', 'exit', 'q']:\n                break\n            \n            preferred_time = input(\"ðŸ• Enter preferred time (HH:MM format, optional): \").strip()\n            if not preferred_time:\n                preferred_time = None\n            \n            print(\"\\nðŸ”„ Processing request...\")\n            \n            # Process the request\n            recommendations = agent.process_request(\n                source=source,\n                destination=destination,\n                preferred_time=preferred_time\n            )\n            \n            if 'error' in recommendations:\n                print(f\"\\nâŒ Error: {recommendations['error']}\")\n                continue\n            \n            # Display results\n            print(\"\\n\" + \"=\" * 60)\n            print(\"ðŸŽ¯ TRAFFIC ADVISORY RESULTS\")\n            print(\"=\" * 60)\n            \n            # Format and display recommendations\n            formatted_results = agent.action.format_for_display(\n                recommendations, 'detailed'\n            )\n            print(formatted_results)\n            \n            # Ask if user wants to continue\n            continue_choice = input(\"\\nðŸ”„ Plan another route? (y/n): \").strip().lower()\n            if continue_choice not in ['y', 'yes']:\n                break\n                \n    except KeyboardInterrupt:\n        print(\"\\n\\nðŸ‘‹ Goodbye! Thanks for using the Traffic Advisory Agent.\")\n    except Exception as e:\n        print(f\"\\nâŒ An error occurred: {e}\")\n    \n    print(\"\\n\" + \"=\" * 80)\n    print(\"ðŸŒ Thank you for contributing to sustainable urban mobility!\")\n    print(\"ðŸŽ¯ Together we're working towards SDG 11: Sustainable Cities and Communities\")\n    print(\"=\" * 80)\n\ndef run_web_interface():\n    \"\"\"\n    Launch the Streamlit web interface\n    \"\"\"\n    import subprocess\n    import sys\n    \n    print(\"ðŸš€ Launching Traffic Advisory Agent Web Interface...\")\n    print(\"ðŸŒ The application will open in your default web browser.\")\n    print(\"ðŸ“ URL: http://localhost:8501\")\n    print(\"\\nâ¹ï¸  Press Ctrl+C to stop the server\")\n    print(\"=\" * 60)\n    \n    try:\n        # Run streamlit app\n        subprocess.run([\n            sys.executable, \"-m\", \"streamlit\", \"run\", \n            \"src/streamlit_app.py\",\n            \"--server.port=8501\",\n            \"--server.headless=false\"\n        ])\n    except KeyboardInterrupt:\n        print(\"\\n\\nðŸ‘‹ Web interface stopped. Thank you for using the Traffic Advisory Agent!\")\n    except Exception as e:\n        print(f\"\\nâŒ Failed to launch web interface: {e}\")\n        print(\"ðŸ’¡ Make sure Streamlit is installed: pip install streamlit\")\n\ndef demo_advanced_features():\n    \"\"\"\n    Demonstrate advanced features of the agent\n    \"\"\"\n    print(\"ðŸ”¬ ADVANCED FEATURES DEMO\")\n    print(\"=\" * 40)\n    \n    agent = TrafficAdvisoryAgent()\n    \n    if not agent.is_initialized:\n        print(\"âŒ Failed to initialize agent.\")\n        return\n    \n    # Demo 1: Traffic insights for specific location\n    print(\"\\n1ï¸âƒ£ Location-specific traffic insights:\")\n    insights = agent.get_traffic_insights(location=\"Downtown\", hour=8)\n    if 'location_analysis' in insights:\n        loc_analysis = insights['location_analysis']\n        print(f\"   â€¢ Average congestion at Downtown: {loc_analysis['average_congestion']:.3f}\")\n        print(f\"   â€¢ Best hours: {', '.join([f'{h:02d}:00' for h in loc_analysis['best_hours']])}\")\n    \n    # Demo 2: Sustainability analysis\n    print(\"\\n2ï¸âƒ£ Sustainability analysis:\")\n    sample_route = {'distance_km': 15, 'co2_emission_kg': 2.5}\n    sustainability_report = agent.get_sustainability_report(sample_route)\n    mode_comparison = sustainability_report['transportation_mode_comparison']\n    print(f\"   â€¢ Current route CO2: {sample_route['co2_emission_kg']} kg\")\n    print(f\"   â€¢ Best alternative: {mode_comparison[0]['travel_mode']} \"\n          f\"({mode_comparison[0]['co2_emission_kg']} kg CO2)\")\n    \n    # Demo 3: Preference customization\n    print(\"\\n3ï¸âƒ£ Custom optimization preferences:\")\n    custom_preferences = {\n        'travel_time': 0.2,\n        'congestion': 0.2,\n        'fuel_efficiency': 0.1,\n        'environmental_impact': 0.5  # Prioritize environmental impact\n    }\n    \n    result = agent.update_preferences(custom_preferences)\n    print(f\"   â€¢ Preferences updated: {result['status']}\")\n    print(f\"   â€¢ Environmental impact weight: 50%\")\n    \n    print(\"\\nâœ¨ Advanced features demonstrated successfully!\")\n\nif __name__ == \"__main__\":\n    if len(sys.argv) > 1:\n        if sys.argv[1] == \"web\":\n            run_web_interface()\n        elif sys.argv[1] == \"demo\":\n            demo_advanced_features()\n        else:\n            print(\"Usage:\")\n            print(\"  python main.py         - Run interactive CLI\")\n            print(\"  python main.py web     - Launch web interface\")\n            print(\"  python main.py demo    - Run advanced features demo\")\n    else:\n        main()